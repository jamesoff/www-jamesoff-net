<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>open proxy checking for irc &#8211; jamesoff.net</title>
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/">
<meta name="twitter:title" content="open proxy checking for irc">
<meta name="twitter:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
<meta name="twitter:creator" content="@jamesoff">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="open proxy checking for irc">
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
<meta property="og:url" content="/coding/2003/12/31/open-proxy-checking-for-irc/">
<meta property="og:site_name" content="jamesoff.net">





<link rel="canonical" href="/coding/2003/12/31/open-proxy-checking-for-irc/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="jamesoff.net Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="James Seward photo" class="author-photo">
					<h4>James Seward</h4>
					<p>A generally awesome guy</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:james@jamesoff.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/jamesoff"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="http://facebook.com/jms.off"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="http://github.com/jamesoff"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/coding/2003/12/31/open-proxy-checking-for-irc/" rel="bookmark" title="open proxy checking for irc">open proxy checking for irc</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2003-12-31T01:22:13+00:00">December 31, 2003</time></span></h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Quite a large number of IRC servers run <a href="http://www.blitzed.org/bopm/">Open Proxy Monitors</a> which either look up connecting hosts in RBLs, or actively scan them to check for open proxies allowing anonymous IRC connections, or both. However, not all servers have them (for various reasons, including legal ones). Not all servers check a wide range of blacklists either.</p>

<p>When <code>#exeter</code> recently came under attack from Ashlee (a well-known EFNet annoyance), I wrote a script to allow my eggdrop to request a bopm checked a host. This ran into quite a few problems, including just getting the two to interact correctly.  It also turned out most hosts were listed in an RBL but the bopm couldn’t detect them as being open (although a portscan with nmap revealed an obviously compromised host).</p>

<p>The solution I ended up writing was to get the bot itself to do the RBL lookups. They’re really quite easy:</p>

<ol>
  <li>Resolve the user’s host to an IP (if it isn’t already).</li>
  <li>Reverse the IP (so <code>1.2.3.4</code> becomes <code>4.3.2.1</code>).</li>
  <li>Append the name of the RBL you want to look in (e.g. <code>4.3.2.1</code> becomes <code>4.3.2.1.opm.blitzed.org</code>)</li>
  <li>Look up that host, and if you get an IP back (which will <code>127.0.0.*</code>, where the last digit tells you the type of proxy), then you can ban the original host</li>
</ol>

<p>It turns out eggdrop makes this extremely easy because the DNS function takes a callback to run when the lookup is complete, and you can pass any number of extra parameters to the callback, so keeping track of which user you just got the results for is very easy).</p>

<p>The result is proxycheck.tcl, which you can find on <a href="https://github.com/jamesoff/eggdrop-scripts">GitHub</a>.</p>

<p>Enjoy responsibly.</p>

      <footer class="entry-meta">
        <span class="entry-tags"></span>
        
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=/coding/2003/12/31/open-proxy-checking-for-irc/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=/coding/2003/12/31/open-proxy-checking-for-irc/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=/coding/2003/12/31/open-proxy-checking-for-irc/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="/general/2003/11/17/nnfmp/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="/coding/mac%20os%20x/alfred/2013/07/20/ynab-category-check-workflow-for-alfred-2/" title="YNAB category check workflow for Alfred 2">YNAB category check workflow for Alfred 2</a></h3>
      <p>This is a workflow which lets you look up how much you have left in a [You Need a Budget](http://www.youneedabudget.com) category for the...&hellip; <a href="/coding/mac%20os%20x/alfred/2013/07/20/ynab-category-check-workflow-for-alfred-2/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="/uncategorized/2012/11/09/vmware-fusion-keyboard-layout/" title="VMware Fusion keyboard layout">VMware Fusion keyboard layout</a></h4>
        <span>Published on November 09, 2012</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="/mac%20os%20x/2011/07/13/alfred-script-to-toggle-airport/" title="Alfred script to toggle AirPort">Alfred script to toggle AirPort</a></h4>
        <span>Published on July 13, 2011</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 James Seward. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/" rel="notfollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



	        

</body>
</html>
