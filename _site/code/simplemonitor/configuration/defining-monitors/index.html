<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Defining monitors &#8211; jamesoff.net</title>
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/">
<meta name="twitter:title" content="Defining monitors">
<meta name="twitter:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
<meta name="twitter:creator" content="@jamesoff">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Defining monitors">
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.">
<meta property="og:url" content="/code/simplemonitor/configuration/defining-monitors/">
<meta property="og:site_name" content="jamesoff.net">





<link rel="canonical" href="/code/simplemonitor/configuration/defining-monitors/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="jamesoff.net Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="page" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="James Seward photo" class="author-photo">
					<h4>James Seward</h4>
					<p>A generally awesome guy</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:james@jamesoff.net"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/jamesoff"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="http://facebook.com/jms.off"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				
				<li>
					<a href="http://github.com/jamesoff"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        <h1 class="entry-title">Defining monitors</h1>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Monitors are defined in `monitors.ini` or another file if you've defined one in `monitor.ini`.</p>
<p>Each monitor's name goes in square brackets and the options for that monitor follow it.</p>
<p>The name `defaults` is reserved. Any options given to this monitor will be also given to all other monitors (except where overridden).</p>
<p>Not all monitors can run on all types of host. For this documentation, Cygwin counts mainly as Windows. Monitors will complain when the program starts if they will be unable to run.</p>
<p>The types of monitor available are:</p>
<p> * *host*: Pings a host (once per iteration) to see if it's available. Multiplatform.<br />
 * *service*: Checks a Windows service to make sure it's running. Windows only.<br />
 * *tcp*: Checks that a TCP port is open. Doesn't care what happens after the connection is opened. Multiplatform.<br />
 * *rc*: Checks a FreeBSD-style service is running, by running its rc script (in `&#47;usr&#47;local&#47;etc&#47;rc.d`) with the `status` command. May work for other types of rc.d&#47;init.d system. Not for Windows.<br />
 * *svc*: Checks a [supervise](http:&#47;&#47;cr.yp.to&#47;daemontools.html) service is running. Not for Windows.<br />
 * *diskspace*: Checks the free space on a partition is above a given limit. Multiplatform.<br />
 * *http*: Attempts to fetch a URL and makes sure the HTTP return code is `200 OK`. Can also look through the content of the page trying to match a regular expression. Multiplatform.<br />
 * *apcupsd*: Uses (an existing and correctly configured) [apcupsd](http:&#47;&#47;www.apcupsd.org&#47;) to check that a UPS is not running from batteries or having some other problem. Multiplatform.<br />
 * *fail*: This monitor fails 5 times in a row and then succeeds once. Use for testing. Multiplatform.</p>
<p>All monitor types share these common configuration options:</p>
<p> * **type**: One of the types from the above list. Required; no default.<br />
 * **runon**: A hostname (as returned from Python's `socket.gethostname()`) on which the monitor should run. All other hosts will ignore this monitor completely. Optional; default is all hosts.<br />
 * **depend**: A comma-separated list of other monitors on which this one depends. If one of the dependencies fails (or is skipped), this monitor will also skip. A skip does not trigger an alert. Optional; default is empty.<br />
 * **tolerance**: The number of times a monitor can fail before it's actually considered failed (and generates an alert). Handy for things which intermittently fail to poll (the host monitor is guilty of this). This also interacts with the limit option on alerters. Optional; default=1 (i.e. alert on first fail)<br />
 * **urgent**: If this monitor is urgent or not. Non-urgent monitors cannot trigger urgent alerters (e.g. the SMS alerter). Set to 0 to make a monitor non-urgent. Optional, default=1.<br />
 * **gap**: The number of seconds gap between polls for this monitor. Setting this lower than the global interval will have no effect. Use it to make a monitor poll only once an hour, for example. Optional; default=0 (poll every interval)<br />
 * **remote_alert**: This monitor wants a remote host to handle alerting instead of the local host. Set to 1 to enable. Not required; default=0 (i.e. local host does alerts). This is a good candidate for putting in `defaults` if you want to use remote alerting for all your monitors.</p>
<p>Host monitors<br />
---<br />
 * **host**: The hostname to ping. Required, no default.</p>
<p>Service monitors<br />
---<br />
 * **service**: The short name of the service to monitor. This is the "Service name" on the General tab of the service properties (in the Services MMC snap-in). Required, no default.<br />
 * **host**: The hostname to check the service on. Optional, default=localhost.<br />
 * **state**: The state the service should be in. Optional, default=RUNNING.</p>
<p>TCP monitors<br />
---<br />
 * **host**: The name of the host to connect to. Required, no default.<br />
 * **port**: The port to connect to. Integer only (no service names). Required, no default.</p>
<p>rc monitors<br />
---<br />
 * **service**: The name of the service to check. This is the name of the rc.d script in `&#47;usr&#47;local&#47;etc&#47;rc.d&#47;`. Any trailing ".sh" is optional and will be added if needed. Required, no default.</p>
<p>The rc monitor does have additional options like which directory to look in, and the required return value, but currently they cannot be set from the configuration file.</p>
<p>svc monitors<br />
---<br />
 * **path**: The path to the service's directory (e.g. `&#47;var&#47;service&#47;something`). Required, no default.</p>
<p>Diskspace monitors<br />
---<br />
 * **partition**: The partition to check for space on. On Windows, this is the drive letter (e.g. `C:`). On non-Windows, this is the mount point (e.g. `&#47;usr`). Required, no default.<br />
 * **limit**: The minimum amount of free space. Give a number in bytes, or suffix K, M or G for kilobytes, megabytes or gigabytes. Required, no default.</p>
<p>HTTP monitors<br />
---<br />
 * **url**: The URL to open. Required. No default.<br />
 * **regexp**: The regexp to look for in the page (only if the page loads with status `200 OK`). If the regexp does not match, the monitor reports a failure. Optional, default is no regexp. See Python's `re` module for syntax.<br />
 * **allowed_codes**: A list of HTTP codes which are acceptable in addition to `200 OK`. Optional, no default.</p>
<p>apcupsd monitors<br />
---<br />
 * **path**: The path to the `apcaccess` binary. If SimpleMonitors detects it's running on Windows, this defaults to `C:\apcupsd\bin`. If not running on Windows, this defaults to looking in `PATH`. You should only need to specify this if you've installed apcupsd somewhere exotic. Optional, default is to be too clever for own good.</p>
<p>fail monitors<br />
---<br />
No additional options.</p>
<p>See the <a href="..">Configuration&lt;&#47;a&gt; page for an example.
</a></p>

      <footer class="entry-meta">
        
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=/code/simplemonitor/configuration/defining-monitors/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=/code/simplemonitor/configuration/defining-monitors/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=/code/simplemonitor/configuration/defining-monitors/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 James Seward. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/" rel="notfollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



          

</body>
</html>
